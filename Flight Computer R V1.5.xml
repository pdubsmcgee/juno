<?xml version="1.0" encoding="utf-8"?>
<Program name="The Rocket Whisperer">
  <Variables>
    <Variable name="targetalt_m" number="0" />
    <Variable name="targetinc_deg" number="0" />
    <Variable name="fc_mode" number="0" />
    <Variable name="attowner" number="0" />
    <Variable name="throwner" number="0" />
    <Variable name="fc_mode_none" number="0" />
    <Variable name="fc_mode_countdown" number="0" />
    <Variable name="fc_mode_ascent" number="0" />
    <Variable name="fc_mode_circularization" number="0" />
    <Variable name="fc_mode_done" number="0" />
    <Variable name="attowner_none" number="0" />
    <Variable name="attowner_gravity_turn" number="0" />
    <Variable name="attowner_guidance" number="0" />
    <Variable name="attowner_circularization" number="0" />
    <Variable name="throwner_none" number="0" />
    <Variable name="throwner_gravity_turn" number="0" />
    <Variable name="throwner_guidance" number="0" />
    <Variable name="throwner_circularization" number="0" />
    <Variable name="manual" number="0" />
    <Variable name="gt_tsv" number="0" />
    <Variable name="gt_tev" number="0" />
    <Variable name="gt_pitchmin" number="0" />
    <Variable name="gt_maxaoa" number="0" />
    <Variable name="gt_pitchcmd" number="0" />
    <Variable name="gt_headingcmd" number="0" />
    <Variable name="peg_readyk" number="0" />
    <Variable name="peg_e1" number="0" />
    <Variable name="peg_e2" number="0" />
    <Variable name="peg_temp" number="0" />
    <Variable name="peg_k" number="0" />
    <Variable name="peg_r0" number="0" />
    <Variable name="peg_nodeaxis" number="0" />
    <Variable name="peg_htarget" number="0" />
    <Variable name="peg_pitchcmd" number="0" />
    <Variable name="peg_headingcmd" number="0" />
    <Variable name="circ_active" number="0" />
    <Variable name="frac" number="0" />
    <Variable name="mu" number="0" />
    <Variable name="ra" number="0" />
    <Variable name="dv" number="0" />
    <Variable name="burnstart" number="0" />
    <Variable name="lowfuelcount" number="0" />
    <Variable name="lowthrustcount" number="0" />
    <Variable name="stagelock" number="0" />
    <Variable name="init" number="0" />
    <Variable name="smoothdiv" number="0" />
    <Variable name="pitchbase" number="0" />
    <Variable name="vsurf" number="0" />
    <Variable name="denom" number="0" />
    <Variable name="tempmag" number="0" />
    <Variable name="escale" number="0" />
    <Variable name="k_e_max" number="0" />
    <Variable name="k_i_max" number="0" />
    <Variable name="targetinc_rad" number="0" />
    <Variable name="rvec" number="0" />
    <Variable name="vvec" number="0" />
    <Variable name="rhat" number="0" />
    <Variable name="nhat" number="0" />
    <Variable name="ehat" number="0" />
    <Variable name="ki" number="0" />
    <Variable name="peg_htarget_ready" number="0" />
    <Variable name="cosi" number="0" />
    <Variable name="sini" number="0" />
    <Variable name="term1" number="0" />
    <Variable name="term2" number="0" />
    <Variable name="term3" number="0" />
    <Variable name="hvec" number="0" />
    <Variable name="hhat" number="0" />
    <Variable name="planeerroraxis" number="0" />
    <Variable name="planeerrormag" number="0" />
    <Variable name="r" number="0" />
    <Variable name="rt" number="0" />
    <Variable name="vcirc" number="0" />
    <Variable name="gvec" number="0" />
    <Variable name="rmag" number="0" />
    <Variable name="gmag" number="0" />
    <Variable name="vmag" number="0" />
    <Variable name="ee" number="0" />
    <Variable name="ke" number="0" />
    <Variable name="e" number="0" />
    <Variable name="et" number="0" />
    <Variable name="traw" number="0" />
    <Variable name="that" number="0" />
    <Variable name="hvec2" number="0" />
    <Variable name="hhat2" number="0" />
    <Variable name="caxis" number="0" />
    <Variable name="pdir" number="0" />
    <Variable name="ucomp" number="0" />
    <Variable name="ncomp" number="0" />
    <Variable name="ecomp" number="0" />
    <Variable name="pitchrad" number="0" />
    <Variable name="pitchdeg" number="0" />
    <Variable name="headingrad" number="0" />
    <Variable name="headingdeg" number="0" />
    <Variable name="dcmd" number="0" />
    <Variable name="hdgerror" number="0" />
    <Variable name="circ_tolalt" number="0" />
    <Variable name="circ_toldv" number="0" />
    <Variable name="circ_minthrust" number="0" />
    <Variable name="circ_mintime" number="0" />
    <Variable name="vnow" number="0" />
    <Variable name="m" number="0" />
    <Variable name="maxt" number="0" />
    <Variable name="tburn" number="0" />
    <Variable name="thrcut" number="0" />
    <Variable name="twr_target_gt" number="0" />
    <Variable name="twr_target_peg" number="0" />
    <Variable name="minthrottle" number="0" />
    <Variable name="maxthrottle" number="0" />
    <Variable name="thr" number="0" />
    <Variable name="circlocked" number="0" />
  </Variables>
  <Instructions>
    <Event event="FlightStart" id="0" style="flight-start" pos="3913.307,81.01453" />
    <Comment id="1" style="comment">
      <Constant style="comment-text" canReplace="false" text="GT Guidance (frame-synced guidance loop tick)" />
    </Comment>
    <SetVariable id="2" style="set-variable">
      <Variable list="false" local="false" variableName="gt_tsv" />
      <Constant text="250" />
    </SetVariable>
    <SetVariable id="3" style="set-variable">
      <Variable list="false" local="false" variableName="gt_tev" />
      <Constant text="2400" />
    </SetVariable>
    <SetVariable id="4" style="set-variable">
      <Variable list="false" local="false" variableName="gt_pitchmin" />
      <Constant text="15" />
    </SetVariable>
    <SetVariable id="5" style="set-variable">
      <Variable list="false" local="false" variableName="gt_maxaoa" />
      <Constant text="8" />
    </SetVariable>
    <SetVariable id="6" style="set-variable">
      <Variable list="false" local="false" variableName="gt_pitchcmd" />
      <Constant text="90" />
    </SetVariable>
    <SetVariable id="7" style="set-variable">
      <Variable list="false" local="false" variableName="gt_headingcmd" />
      <BinaryOp op="+" style="op-add">
        <Variable list="false" local="false" variableName="targetinc_deg" />
        <Constant text="90" />
      </BinaryOp>
    </SetVariable>
    <While id="8" style="while">
      <Constant style="true" bool="true" />
      <Instructions>
        <If id="9" style="if">
          <Not style="op-not">
            <Comparison op="=" style="op-eq">
              <Variable list="false" local="false" variableName="attowner" />
              <Constant text="1" />
            </Comparison>
          </Not>
          <Instructions>
            <WaitSeconds id="10" style="wait-seconds">
              <Constant text="0.05" />
            </WaitSeconds>
          </Instructions>
        </If>
        <ElseIf id="11" style="else">
          <Constant bool="true" />
          <Instructions>
            <SetVariable id="12" style="set-variable">
              <Variable list="false" local="false" variableName="vsurf" />
              <CraftProperty property="Vel.SurfaceVelocity" style="prop-velocity" />
            </SetVariable>
            <SetVariable id="13" style="set-variable">
              <Variable list="false" local="false" variableName="denom" />
              <BinaryOp op="-" style="op-sub">
                <Variable list="false" local="false" variableName="gt_tev" />
                <Variable list="false" local="false" variableName="gt_tsv" />
              </BinaryOp>
            </SetVariable>
            <If id="14" style="if">
              <Comparison op="l" style="op-lt">
                <Variable list="false" local="false" variableName="denom" />
                <Constant text="1" />
              </Comparison>
              <Instructions>
                <SetVariable id="15" style="set-variable">
                  <Variable list="false" local="false" variableName="denom" />
                  <Constant text="1" />
                </SetVariable>
              </Instructions>
            </If>
            <SetVariable id="16" style="set-variable">
              <Variable list="false" local="false" variableName="frac" />
              <BinaryOp op="/" style="op-div">
                <BinaryOp op="-" style="op-sub">
                  <Variable list="false" local="false" variableName="vsurf" />
                  <Variable list="false" local="false" variableName="gt_tsv" />
                </BinaryOp>
                <Variable list="false" local="false" variableName="denom" />
              </BinaryOp>
            </SetVariable>
            <If id="17" style="if">
              <Comparison op="l" style="op-lt">
                <Variable list="false" local="false" variableName="frac" />
                <Constant text="0" />
              </Comparison>
              <Instructions>
                <SetVariable id="18" style="set-variable">
                  <Variable list="false" local="false" variableName="frac" />
                  <Constant text="0" />
                </SetVariable>
              </Instructions>
            </If>
            <If id="19" style="if">
              <Comparison op="l" style="op-lt">
                <Constant text="1" />
                <Variable list="false" local="false" variableName="frac" />
              </Comparison>
              <Instructions>
                <SetVariable id="20" style="set-variable">
                  <Variable list="false" local="false" variableName="frac" />
                  <Constant text="1" />
                </SetVariable>
              </Instructions>
            </If>
            <SetVariable id="21" style="set-variable">
              <Variable list="false" local="false" variableName="pitchbase" />
              <BinaryOp op="-" style="op-sub">
                <Constant text="90" />
                <BinaryOp op="*" style="op-mul">
                  <Constant text="90" />
                  <Variable list="false" local="false" variableName="frac" />
                </BinaryOp>
              </BinaryOp>
            </SetVariable>
            <If id="22" style="if">
              <Comparison op="l" style="op-lt">
                <Variable list="false" local="false" variableName="pitchbase" />
                <Variable list="false" local="false" variableName="gt_pitchmin" />
              </Comparison>
              <Instructions>
                <SetVariable id="23" style="set-variable">
                  <Variable list="false" local="false" variableName="pitchbase" />
                  <Variable list="false" local="false" variableName="gt_pitchmin" />
                </SetVariable>
              </Instructions>
            </If>
            <If id="24" style="if">
              <Comparison op="l" style="op-lt">
                <Variable list="false" local="false" variableName="gt_maxaoa" />
                <CraftProperty property="Nav.AngleOfAttack" style="prop-nav" />
              </Comparison>
              <Instructions>
                <SetVariable id="25" style="set-variable">
                  <Variable list="false" local="false" variableName="smoothdiv" />
                  <Constant text="20" />
                </SetVariable>
              </Instructions>
            </If>
            <ElseIf id="26" style="else">
              <Constant bool="true" />
              <Instructions>
                <SetVariable id="27" style="set-variable">
                  <Variable list="false" local="false" variableName="smoothdiv" />
                  <Constant text="10" />
                </SetVariable>
              </Instructions>
            </ElseIf>
            <SetVariable id="28" style="set-variable">
              <Variable list="false" local="false" variableName="gt_pitchcmd" />
              <BinaryOp op="+" style="op-add">
                <Variable list="false" local="false" variableName="gt_pitchcmd" />
                <BinaryOp op="/" style="op-div">
                  <BinaryOp op="-" style="op-sub">
                    <Variable list="false" local="false" variableName="pitchbase" />
                    <Variable list="false" local="false" variableName="gt_pitchcmd" />
                  </BinaryOp>
                  <Variable list="false" local="false" variableName="smoothdiv" />
                </BinaryOp>
              </BinaryOp>
            </SetVariable>
            <SetTargetHeading property="heading" id="29" style="set-heading">
              <Variable list="false" local="false" variableName="gt_headingcmd" />
            </SetTargetHeading>
            <SetTargetHeading property="pitch" id="30" style="set-heading">
              <Variable list="false" local="false" variableName="gt_pitchcmd" />
            </SetTargetHeading>
            <WaitSeconds id="31" style="wait-seconds">
              <Constant text="0" />
            </WaitSeconds>
          </Instructions>
        </ElseIf>
        <WaitSeconds id="32" style="wait-seconds">
          <Constant text="0" />
        </WaitSeconds>
      </Instructions>
    </While>
  </Instructions>
  <Instructions>
    <Comment id="33" style="comment" pos="3495.952,976.8877">
      <Constant style="comment-text" canReplace="false" text="Peg Guidance" />
    </Comment>
  </Instructions>
  <Instructions>
    <Event event="FlightStart" id="34" style="flight-start" pos="2440.463,1133.957" />
    <Comment id="35" style="comment">
      <Constant style="comment-text" canReplace="false" text="K solver" />
    </Comment>
    <SetVariable id="36" style="set-variable">
      <Variable list="false" local="false" variableName="peg_readyk" />
      <Constant number="0" />
    </SetVariable>
    <SetVariable id="37" style="set-variable">
      <Variable list="false" local="false" variableName="peg_e1" />
      <VectorOp op="norm" style="vec-op-1">
        <CraftProperty property="Nav.East" style="prop-nav" />
      </VectorOp>
    </SetVariable>
    <While id="38" style="while">
      <Constant style="true" bool="true" />
      <Instructions>
        <If id="39" style="if">
          <Comparison op="=" style="op-eq">
            <Variable list="false" local="false" variableName="peg_readyk" />
            <Constant text="1" />
          </Comparison>
          <Instructions>
            <WaitSeconds id="40" style="wait-seconds">
              <Constant text="10" />
            </WaitSeconds>
          </Instructions>
        </If>
        <WaitSeconds id="41" style="wait-seconds">
          <Constant text="10" />
        </WaitSeconds>
        <SetVariable id="42" style="set-variable">
          <Variable list="false" local="false" variableName="peg_e2" />
          <VectorOp op="norm" style="vec-op-1">
            <CraftProperty property="Nav.East" style="prop-nav" />
          </VectorOp>
        </SetVariable>
        <SetVariable id="43" style="set-variable">
          <Variable list="false" local="false" variableName="peg_temp" />
          <VectorOp op="cross" style="vec-op-2">
            <Variable list="false" local="false" variableName="peg_e1" />
            <Variable list="false" local="false" variableName="peg_e2" />
          </VectorOp>
        </SetVariable>
        <SetVariable id="44" style="set-variable">
          <Variable list="false" local="false" variableName="tempmag" />
          <VectorOp op="length" style="vec-op-1">
            <Variable list="false" local="false" variableName="peg_temp" />
          </VectorOp>
        </SetVariable>
        <If id="45" style="if">
          <Comparison op="g" style="op-gt">
            <Variable list="false" local="false" variableName="tempmag" />
            <Constant text=".0001" />
          </Comparison>
          <Instructions>
            <SetVariable id="46" style="set-variable">
              <Variable list="false" local="false" variableName="peg_k" />
              <VectorOp op="norm" style="vec-op-1">
                <Variable list="false" local="false" variableName="peg_temp" />
              </VectorOp>
            </SetVariable>
            <SetVariable id="47" style="set-variable">
              <Variable list="false" local="false" variableName="peg_readyk" />
              <Constant text="1" />
            </SetVariable>
            <LogFlight id="48" style="flightlog">
              <Constant text="K value solved" />
              <Constant style="false" bool="false" />
            </LogFlight>
          </Instructions>
        </If>
        <ElseIf id="49" style="else">
          <Constant bool="true" />
          <Instructions>
            <SetVariable id="50" style="set-variable">
              <Variable list="false" local="false" variableName="peg_e1" />
              <Variable list="false" local="false" variableName="peg_e2" />
            </SetVariable>
          </Instructions>
        </ElseIf>
      </Instructions>
    </While>
  </Instructions>
  <Instructions>
    <Event event="FlightStart" id="51" style="flight-start" pos="2067.532,-94.64899" />
    <Comment id="52" style="comment">
      <Constant style="comment-text" canReplace="false" text="Flight Mode Controller (mode/status loop tick: 0.05s)" />
    </Comment>
    <Comment id="403" style="comment">
      <Constant style="comment-text" canReplace="false" text="fc_mode states: none=0, countdown=1, ascent=2, circularization=3, done=4" />
    </Comment>
    <Comment id="404" style="comment">
      <Constant style="comment-text" canReplace="false" text="attowner states: none/manual=0, gravity_turn=1, guidance=2, circularization=3" />
    </Comment>
    <Comment id="405" style="comment">
      <Constant style="comment-text" canReplace="false" text="throwner states: none/manual=0, gravity_turn=1, guidance=2, circularization=3" />
    </Comment>
    <SetVariable id="406" style="set-variable">
      <Variable list="false" local="false" variableName="fc_mode_none" />
      <Constant text="0" />
    </SetVariable>
    <SetVariable id="407" style="set-variable">
      <Variable list="false" local="false" variableName="fc_mode_countdown" />
      <Constant text="1" />
    </SetVariable>
    <SetVariable id="408" style="set-variable">
      <Variable list="false" local="false" variableName="fc_mode_ascent" />
      <Constant text="2" />
    </SetVariable>
    <SetVariable id="409" style="set-variable">
      <Variable list="false" local="false" variableName="fc_mode_circularization" />
      <Constant text="3" />
    </SetVariable>
    <SetVariable id="410" style="set-variable">
      <Variable list="false" local="false" variableName="fc_mode_done" />
      <Constant text="4" />
    </SetVariable>
    <SetVariable id="411" style="set-variable">
      <Variable list="false" local="false" variableName="attowner_none" />
      <Constant text="0" />
    </SetVariable>
    <SetVariable id="412" style="set-variable">
      <Variable list="false" local="false" variableName="attowner_gravity_turn" />
      <Constant text="1" />
    </SetVariable>
    <SetVariable id="413" style="set-variable">
      <Variable list="false" local="false" variableName="attowner_guidance" />
      <Constant text="2" />
    </SetVariable>
    <SetVariable id="414" style="set-variable">
      <Variable list="false" local="false" variableName="attowner_circularization" />
      <Constant text="3" />
    </SetVariable>
    <SetVariable id="415" style="set-variable">
      <Variable list="false" local="false" variableName="throwner_none" />
      <Constant text="0" />
    </SetVariable>
    <SetVariable id="416" style="set-variable">
      <Variable list="false" local="false" variableName="throwner_gravity_turn" />
      <Constant text="1" />
    </SetVariable>
    <SetVariable id="417" style="set-variable">
      <Variable list="false" local="false" variableName="throwner_guidance" />
      <Constant text="2" />
    </SetVariable>
    <SetVariable id="418" style="set-variable">
      <Variable list="false" local="false" variableName="throwner_circularization" />
      <Constant text="3" />
    </SetVariable>
    <SetVariable id="53" style="set-variable">
      <Variable list="false" local="false" variableName="fc_mode" />
      <Variable list="false" local="false" variableName="fc_mode_countdown" />
    </SetVariable>
    <SetVariable id="54" style="set-variable">
      <Variable list="false" local="false" variableName="attowner" />
      <Variable list="false" local="false" variableName="attowner_none" />
    </SetVariable>
    <SetVariable id="55" style="set-variable">
      <Variable list="false" local="false" variableName="throwner" />
      <Variable list="false" local="false" variableName="throwner_none" />
    </SetVariable>
    <UserInput id="56" style="user-input">
      <Variable list="false" local="false" variableName="targetalt_m" />
      <Constant text="Target Alt?" />
    </UserInput>
    <UserInput id="57" style="user-input">
      <Variable list="false" local="false" variableName="targetinc_deg" />
      <Constant text="Target inc?" />
    </UserInput>
    <UserInput id="58" style="user-input">
      <Variable list="false" local="false" variableName="init" />
      <Constant text="Autostage??  1 or 0" />
    </UserInput>
    <While id="59" style="while">
      <Constant style="true" bool="true" />
      <Instructions>
        <SetVariable id="60" style="set-variable">
          <Variable list="false" local="false" variableName="manual" />
          <ActivationGroup style="activation-group">
            <Constant number="1" />
          </ActivationGroup>
        </SetVariable>
        <If id="61" style="if">
          <Comparison op="=" style="op-eq">
            <Variable list="false" local="false" variableName="manual" />
            <Constant style="true" bool="true" />
          </Comparison>
          <Instructions>
            <SetVariable id="62" style="set-variable">
              <Variable list="false" local="false" variableName="attowner" />
              <Variable list="false" local="false" variableName="attowner_none" />
            </SetVariable>
            <SetVariable id="63" style="set-variable">
              <Variable list="false" local="false" variableName="throwner" />
              <Variable list="false" local="false" variableName="throwner_none" />
            </SetVariable>
            <WaitSeconds id="64" style="wait-seconds">
              <Constant text="0.05" />
            </WaitSeconds>
          </Instructions>
        </If>
        <If id="65" style="if">
          <Comparison op="=" style="op-eq">
            <Variable list="false" local="false" variableName="fc_mode" />
            <Variable list="false" local="false" variableName="fc_mode_countdown" />
          </Comparison>
          <Instructions>
            <CallCustomInstruction call="Countdown" id="66" style="call-custom-instruction" />
          </Instructions>
        </If>
        <If id="67" style="if">
          <Comparison op="=" style="op-eq">
            <Variable list="false" local="false" variableName="fc_mode" />
            <Variable list="false" local="false" variableName="fc_mode_ascent" />
          </Comparison>
          <Instructions>
            <If id="68" style="if">
              <Comparison op="l" style="op-lt">
                <CraftProperty property="Altitude.AGL" style="prop-altitude" />
                <Constant text="10000" />
              </Comparison>
              <Instructions>
                <SetVariable id="69" style="set-variable">
                  <Variable list="false" local="false" variableName="attowner" />
                  <Variable list="false" local="false" variableName="attowner_gravity_turn" />
                </SetVariable>
                <SetVariable id="70" style="set-variable">
                  <Variable list="false" local="false" variableName="throwner" />
                  <Variable list="false" local="false" variableName="throwner_gravity_turn" />
                </SetVariable>
              </Instructions>
            </If>
            <ElseIf id="71" style="else">
              <Constant bool="true" />
              <Instructions>
                <If id="72" style="if">
                  <BoolOp op="and" style="op-and">
                    <Comparison op="g" style="op-gt">
                      <CraftProperty property="Vel.SurfaceVelocity" style="prop-velocity" />
                      <Constant text="600" />
                    </Comparison>
                    <Comparison op="l" style="op-lt">
                      <CraftProperty property="Nav.AngleOfAttack" style="prop-nav" />
                      <Variable list="false" local="false" variableName="gt_maxaoa" />
                    </Comparison>
                  </BoolOp>
                  <Instructions>
                    <SetVariable id="73" style="set-variable">
                      <Variable list="false" local="false" variableName="attowner" />
                      <Variable list="false" local="false" variableName="attowner_guidance" />
                    </SetVariable>
                    <SetVariable id="74" style="set-variable">
                      <Variable list="false" local="false" variableName="throwner" />
                      <Variable list="false" local="false" variableName="throwner_guidance" />
                    </SetVariable>
                  </Instructions>
                </If>
                <ElseIf id="75" style="else">
                  <Constant bool="true" />
                  <Instructions>
                    <SetVariable id="76" style="set-variable">
                      <Variable list="false" local="false" variableName="attowner" />
                      <Variable list="false" local="false" variableName="attowner_gravity_turn" />
                    </SetVariable>
                    <SetVariable id="77" style="set-variable">
                      <Variable list="false" local="false" variableName="throwner" />
                      <Variable list="false" local="false" variableName="throwner_gravity_turn" />
                    </SetVariable>
                  </Instructions>
                </ElseIf>
              </Instructions>
            </ElseIf>
            <If id="78" style="if">
              <Comparison op="ge" style="op-gte">
                <CraftProperty property="Orbit.Apoapsis" style="prop-orbit" />
                <Variable list="false" local="false" variableName="targetalt_m" />
              </Comparison>
              <Instructions>
                <SetVariable id="79" style="set-variable">
                  <Variable list="false" local="false" variableName="fc_mode" />
                  <Variable list="false" local="false" variableName="fc_mode_circularization" />
                </SetVariable>
                <SetVariable id="80" style="set-variable">
                  <Variable list="false" local="false" variableName="circ_active" />
                  <Constant text="1" />
                </SetVariable>
              </Instructions>
            </If>
          </Instructions>
        </If>
        <If id="81" style="if">
          <Comparison op="=" style="op-eq">
            <Variable list="false" local="false" variableName="fc_mode" />
            <Variable list="false" local="false" variableName="fc_mode_circularization" />
          </Comparison>
          <Instructions>
            <SetVariable id="82" style="set-variable">
              <Variable list="false" local="false" variableName="attowner" />
              <Variable list="false" local="false" variableName="attowner_circularization" />
            </SetVariable>
            <SetVariable id="83" style="set-variable">
              <Variable list="false" local="false" variableName="throwner" />
              <Variable list="false" local="false" variableName="throwner_circularization" />
            </SetVariable>
          </Instructions>
        </If>
        <If id="84" style="if">
          <Comparison op="=" style="op-eq">
            <Variable list="false" local="false" variableName="fc_mode" />
            <Variable list="false" local="false" variableName="fc_mode_done" />
          </Comparison>
          <Instructions>
            <If id="85" style="if">
              <Comparison op="=" style="op-eq">
                <Variable list="false" local="false" variableName="circ_active" />
                <Constant number="0" />
              </Comparison>
              <Instructions>
                <SetVariable id="86" style="set-variable">
                  <Variable list="false" local="false" variableName="fc_mode" />
                  <Variable list="false" local="false" variableName="fc_mode_none" />
                </SetVariable>
                <SetVariable id="87" style="set-variable">
                  <Variable list="false" local="false" variableName="attowner" />
                  <Variable list="false" local="false" variableName="attowner_none" />
                </SetVariable>
                <SetVariable id="88" style="set-variable">
                  <Variable list="false" local="false" variableName="throwner" />
                  <Variable list="false" local="false" variableName="throwner_none" />
                </SetVariable>
              </Instructions>
            </If>
          </Instructions>
        </If>
        <WaitSeconds id="89" style="wait-seconds">
          <Constant text="0.05" />
        </WaitSeconds>
      </Instructions>
    </While>
  </Instructions>
  <Instructions>
    <Event event="FlightStart" id="90" style="flight-start" pos="4003.454,-1469.869" />
    <Comment id="91" style="comment">
      <Constant style="comment-text" canReplace="false" text="Autostager (staging/status loop tick: 0.05s)" />
    </Comment>
    <WaitUntil id="92" style="wait-until">
      <Comparison op="ge" style="op-gte">
        <Variable list="false" local="false" variableName="fc_mode" />
        <Variable list="false" local="false" variableName="fc_mode_ascent" />
      </Comparison>
    </WaitUntil>
    <SetVariable id="93" style="set-variable">
      <Variable list="false" local="false" variableName="stagelock" />
      <Constant text="1" />
    </SetVariable>
    <SetVariable id="94" style="set-variable">
      <Variable list="false" local="false" variableName="lowfuelcount" />
      <Constant number="0" />
    </SetVariable>
    <SetVariable id="95" style="set-variable">
      <Variable list="false" local="false" variableName="lowthrustcount" />
      <Constant number="0" />
    </SetVariable>
    <WaitSeconds id="96" style="wait-seconds">
      <Constant text="1" />
    </WaitSeconds>
    <While id="97" style="while">
      <Constant style="true" bool="true" />
      <Instructions>
        <If id="98" style="if">
          <Comparison op="=" style="op-eq">
            <Variable list="false" local="false" variableName="init" />
            <Constant text="0" />
          </Comparison>
          <Instructions>
            <WaitSeconds id="99" style="wait-seconds">
              <Constant text="0.05" />
            </WaitSeconds>
          </Instructions>
        </If>
        <If id="100" style="if">
          <Comparison op="g" style="op-gt">
            <CraftProperty property="Fuel.FuelInStage" style="prop-fuel" />
            <Constant number="0" />
          </Comparison>
          <Instructions>
            <WaitSeconds id="101" style="wait-seconds">
              <Constant text="0.05" />
            </WaitSeconds>
          </Instructions>
        </If>
        <If id="102" style="if">
          <BoolOp op="and" style="op-and">
            <Comparison op="=" style="op-eq">
              <Variable list="false" local="false" variableName="stagelock" />
              <Constant text="1" />
            </Comparison>
            <Comparison op="g" style="op-gt">
              <CraftProperty property="Performance.CurrentEngineThrust" style="prop-performance" />
              <BinaryOp op="*" style="op-mul">
                <CraftProperty property="Performance.MaxActiveEngineThrust" style="prop-performance" />
                <Constant text=".2" />
              </BinaryOp>
            </Comparison>
          </BoolOp>
          <Instructions>
            <SetVariable id="103" style="set-variable">
              <Variable list="false" local="false" variableName="stagelock" />
              <Constant text="0" />
            </SetVariable>
            <LogFlight id="104" style="flightlog">
              <Constant text="reset stagelock" />
              <Constant style="false" bool="false" />
            </LogFlight>
          </Instructions>
        </If>
        <If id="105" style="if">
          <Comparison op="l" style="op-lt">
            <CraftProperty property="Input.Throttle" style="prop-input" />
            <Constant text=".5" />
          </Comparison>
          <Instructions>
            <SetVariable id="106" style="set-variable">
              <Variable list="false" local="false" variableName="lowfuelcount" />
              <Constant number="0" />
            </SetVariable>
            <SetVariable id="107" style="set-variable">
              <Variable list="false" local="false" variableName="lowthrustcount" />
              <Constant number="0" />
            </SetVariable>
            <SetVariable id="108" style="set-variable">
              <Variable list="false" local="false" variableName="stagelock" />
              <Constant number="0" />
            </SetVariable>
            <WaitSeconds id="109" style="wait-seconds">
              <Constant text=".2" />
            </WaitSeconds>
          </Instructions>
        </If>
        <If id="110" style="if">
          <Comparison op="l" style="op-lt">
            <CraftProperty property="Performance.CurrentEngineThrust" style="prop-performance" />
            <Constant text="1" />
          </Comparison>
          <Instructions>
            <SetVariable id="111" style="set-variable">
              <Variable list="false" local="false" variableName="lowthrustcount" />
              <BinaryOp op="+" style="op-add">
                <Variable list="false" local="false" variableName="lowthrustcount" />
                <Constant text="1" />
              </BinaryOp>
            </SetVariable>
            <LogFlight id="112" style="flightlog">
              <Constant text="low thrust" />
              <Constant style="false" bool="false" />
            </LogFlight>
            <WaitSeconds id="113" style="wait-seconds">
              <Constant text=".2" />
            </WaitSeconds>
          </Instructions>
        </If>
        <ElseIf id="114" style="else">
          <Constant bool="true" />
          <Instructions>
            <LogFlight id="115" style="flightlog">
              <Constant text="reset thrust" />
              <Constant style="false" bool="false" />
            </LogFlight>
            <SetVariable id="116" style="set-variable">
              <Variable list="false" local="false" variableName="lowthrustcount" />
              <Constant number="0" />
            </SetVariable>
            <WaitSeconds id="117" style="wait-seconds">
              <Constant text=".2" />
            </WaitSeconds>
          </Instructions>
        </ElseIf>
        <If id="118" style="if">
          <BoolOp op="and" style="op-and">
            <Comparison op="=" style="op-eq">
              <Variable list="false" local="false" variableName="stagelock" />
              <Constant number="0" />
            </Comparison>
            <Comparison op="ge" style="op-gte">
              <Variable list="false" local="false" variableName="lowthrustcount" />
              <Constant text="3" />
            </Comparison>
          </BoolOp>
          <Instructions>
            <ActivateStage id="119" style="activate-stage" />
            <SetVariable id="120" style="set-variable">
              <Variable list="false" local="false" variableName="stagelock" />
              <Constant text="1" />
            </SetVariable>
            <SetVariable id="121" style="set-variable">
              <Variable list="false" local="false" variableName="lowfuelcount" />
              <Constant number="0" />
            </SetVariable>
            <SetVariable id="122" style="set-variable">
              <Variable list="false" local="false" variableName="lowthrustcount" />
              <Constant number="0" />
            </SetVariable>
            <WaitSeconds id="123" style="wait-seconds">
              <Constant text="1.5" />
            </WaitSeconds>
            <LogFlight id="124" style="flightlog">
              <Constant text="activate stage" />
              <Constant style="false" bool="false" />
            </LogFlight>
          </Instructions>
        </If>
        <WaitSeconds id="125" style="wait-seconds">
          <Constant text="0.05" />
        </WaitSeconds>
      </Instructions>
    </While>
  </Instructions>
  <Instructions>
    <Event event="FlightStart" id="126" style="flight-start" pos="4864.378,1133.246" />
    <Comment id="127" style="comment">
      <Constant style="comment-text" canReplace="false" text="Throttle Manager (throttle control loop mostly frame-synced; idle gates 0.05s)" />
    </Comment>
    <WaitUntil id="128" style="wait-until">
      <Comparison op="=" style="op-eq">
        <Variable list="false" local="false" variableName="fc_mode" />
        <Variable list="false" local="false" variableName="fc_mode_ascent" />
      </Comparison>
    </WaitUntil>
    <SetVariable id="129" style="set-variable">
      <Variable list="false" local="false" variableName="twr_target_gt" />
      <Constant text="1.4" />
    </SetVariable>
    <SetVariable id="130" style="set-variable">
      <Variable list="false" local="false" variableName="twr_target_peg" />
      <Constant text="1.35" />
    </SetVariable>
    <SetVariable id="131" style="set-variable">
      <Variable list="false" local="false" variableName="minthrottle" />
      <Constant text=".05" />
    </SetVariable>
    <SetVariable id="132" style="set-variable">
      <Variable list="false" local="false" variableName="maxthrottle" />
      <Constant text="1" />
    </SetVariable>
    <SetVariable id="133" style="set-variable">
      <Variable list="false" local="false" variableName="circ_toldv" />
      <Constant text=".5" />
    </SetVariable>
    <SetVariable id="134" style="set-variable">
      <Variable list="false" local="false" variableName="circ_minthrust" />
      <Constant text="1" />
    </SetVariable>
    <While id="135" style="while">
      <Constant style="true" bool="true" />
      <Instructions>
        <If id="136" style="if">
          <Comparison op="=" style="op-eq">
            <ActivationGroup style="activation-group">
              <Constant number="1" />
            </ActivationGroup>
            <Constant style="true" bool="true" />
          </Comparison>
          <Instructions>
            <WaitSeconds id="137" style="wait-seconds">
              <Constant text="0.05" />
            </WaitSeconds>
          </Instructions>
        </If>
        <If id="138" style="if">
          <Comparison op="l" style="op-lt">
            <Variable list="false" local="false" variableName="fc_mode" />
            <Variable list="false" local="false" variableName="fc_mode_ascent" />
          </Comparison>
          <Instructions>
            <WaitSeconds id="139" style="wait-seconds">
              <Constant text="0.05" />
            </WaitSeconds>
          </Instructions>
        </If>
        <If id="140" style="if">
          <Comparison op="=" style="op-eq">
            <Variable list="false" local="false" variableName="thrcut" />
            <Constant text="1" />
          </Comparison>
          <Instructions>
            <SetInput input="throttle" id="141" style="set-input">
              <Constant number="0" />
            </SetInput>
            <WaitSeconds id="142" style="wait-seconds">
              <Constant text=".5" />
            </WaitSeconds>
          </Instructions>
        </If>
        <If id="143" style="if">
          <Comparison op="=" style="op-eq">
            <Variable list="false" local="false" variableName="throwner" />
            <Variable list="false" local="false" variableName="throwner_none" />
          </Comparison>
          <Instructions>
            <WaitSeconds id="144" style="wait-seconds">
              <Constant text="0.05" />
            </WaitSeconds>
          </Instructions>
        </If>
        <SetVariable id="145" style="set-variable">
          <Variable list="false" local="false" variableName="m" />
          <CraftProperty property="Performance.Mass" style="prop-performance" />
        </SetVariable>
        <SetVariable id="146" style="set-variable">
          <Variable list="false" local="false" variableName="maxt" />
          <CraftProperty property="Performance.MaxActiveEngineThrust" style="prop-performance" />
        </SetVariable>
        <SetVariable id="147" style="set-variable">
          <Variable list="false" local="false" variableName="gvec" />
          <CraftProperty property="Vel.Gravity" style="prop-velocity" />
        </SetVariable>
        <SetVariable id="148" style="set-variable">
          <Variable list="false" local="false" variableName="gmag" />
          <VectorOp op="length" style="vec-op-1">
            <CraftProperty property="Vel.Gravity" style="prop-velocity" />
          </VectorOp>
        </SetVariable>
        <If id="149" style="if">
          <Comparison op="l" style="op-lt">
            <Variable list="false" local="false" variableName="maxt" />
            <Constant text="1" />
          </Comparison>
          <Instructions>
            <SetInput input="throttle" id="150" style="set-input">
              <Constant text="0" />
            </SetInput>
          </Instructions>
        </If>
        <If id="151" style="if">
          <Comparison op="=" style="op-eq">
            <Variable list="false" local="false" variableName="throwner" />
            <Variable list="false" local="false" variableName="throwner_gravity_turn" />
          </Comparison>
          <Instructions>
            <SetVariable id="152" style="set-variable">
              <Variable list="false" local="false" variableName="thr" />
              <BinaryOp op="/" style="op-div">
                <BinaryOp op="*" style="op-mul">
                  <Variable list="false" local="false" variableName="twr_target_gt" />
                  <BinaryOp op="*" style="op-mul">
                    <Variable list="false" local="false" variableName="m" />
                    <Variable list="false" local="false" variableName="gmag" />
                  </BinaryOp>
                </BinaryOp>
                <Variable list="false" local="false" variableName="maxt" />
              </BinaryOp>
            </SetVariable>
            <If id="153" style="if">
              <Comparison op="l" style="op-lt">
                <Variable list="false" local="false" variableName="thr" />
                <Variable list="false" local="false" variableName="minthrottle" />
              </Comparison>
              <Instructions>
                <SetVariable id="154" style="set-variable">
                  <Variable list="false" local="false" variableName="thr" />
                  <Variable list="false" local="false" variableName="minthrottle" />
                </SetVariable>
              </Instructions>
            </If>
            <If id="155" style="if">
              <Comparison op="g" style="op-gt">
                <Variable list="false" local="false" variableName="thr" />
                <Variable list="false" local="false" variableName="maxthrottle" />
              </Comparison>
              <Instructions>
                <SetVariable id="156" style="set-variable">
                  <Variable list="false" local="false" variableName="thr" />
                  <Variable list="false" local="false" variableName="maxthrottle" />
                </SetVariable>
              </Instructions>
            </If>
            <SetInput input="throttle" id="157" style="set-input">
              <Variable list="false" local="false" variableName="thr" />
            </SetInput>
            <WaitSeconds id="158" style="wait-seconds">
              <Constant text="0" />
            </WaitSeconds>
          </Instructions>
        </If>
        <If id="159" style="if">
          <Comparison op="=" style="op-eq">
            <Variable list="false" local="false" variableName="throwner" />
            <Variable list="false" local="false" variableName="throwner_guidance" />
          </Comparison>
          <Instructions>
            <SetVariable id="160" style="set-variable">
              <Variable list="false" local="false" variableName="thr" />
              <BinaryOp op="/" style="op-div">
                <BinaryOp op="*" style="op-mul">
                  <Variable list="false" local="false" variableName="twr_target_peg" />
                  <BinaryOp op="*" style="op-mul">
                    <Variable list="false" local="false" variableName="m" />
                    <Variable list="false" local="false" variableName="gmag" />
                  </BinaryOp>
                </BinaryOp>
                <Variable list="false" local="false" variableName="maxt" />
              </BinaryOp>
            </SetVariable>
            <If id="161" style="if">
              <Comparison op="l" style="op-lt">
                <Variable list="false" local="false" variableName="thr" />
                <Variable list="false" local="false" variableName="minthrottle" />
              </Comparison>
              <Instructions>
                <SetVariable id="162" style="set-variable">
                  <Variable list="false" local="false" variableName="thr" />
                  <Variable list="false" local="false" variableName="minthrottle" />
                </SetVariable>
              </Instructions>
            </If>
            <If id="163" style="if">
              <Comparison op="g" style="op-gt">
                <Variable list="false" local="false" variableName="thr" />
                <Variable list="false" local="false" variableName="maxthrottle" />
              </Comparison>
              <Instructions>
                <SetVariable id="164" style="set-variable">
                  <Variable list="false" local="false" variableName="thr" />
                  <Variable list="false" local="false" variableName="maxthrottle" />
                </SetVariable>
              </Instructions>
            </If>
            <SetInput input="throttle" id="165" style="set-input">
              <Variable list="false" local="false" variableName="thr" />
            </SetInput>
            <WaitSeconds id="166" style="wait-seconds">
              <Constant text="0" />
            </WaitSeconds>
          </Instructions>
        </If>
        <If id="167" style="if">
          <Comparison op="=" style="op-eq">
            <Variable list="false" local="false" variableName="throwner" />
            <Variable list="false" local="false" variableName="throwner_circularization" />
          </Comparison>
          <Instructions>
            <If id="168" style="if">
              <BoolOp op="or" style="op-or">
                <Not style="op-not">
                  <Comparison op="=" style="op-eq">
                    <Variable list="false" local="false" variableName="attowner" />
                    <Variable list="false" local="false" variableName="attowner_circularization" />
                  </Comparison>
                </Not>
                <Comparison op="=" style="op-eq">
                  <Variable list="false" local="false" variableName="circ_active" />
                  <Constant text="0" />
                </Comparison>
              </BoolOp>
              <Instructions>
                <WaitSeconds id="169" style="wait-seconds">
                  <Constant text="0" />
                </WaitSeconds>
              </Instructions>
            </If>
            <SetVariable id="170" style="set-variable">
              <Variable list="false" local="false" variableName="rvec" />
              <CraftProperty property="Nav.Position" style="prop-nav" />
            </SetVariable>
            <SetVariable id="171" style="set-variable">
              <Variable list="false" local="false" variableName="rmag" />
              <VectorOp op="length" style="vec-op-1">
                <Variable list="false" local="false" variableName="rvec" />
              </VectorOp>
            </SetVariable>
            <SetVariable id="172" style="set-variable">
              <Variable list="false" local="false" variableName="mu" />
              <BinaryOp op="*" style="op-mul">
                <Variable list="false" local="false" variableName="gmag" />
                <BinaryOp op="^" style="op-exp">
                  <Variable list="false" local="false" variableName="rmag" />
                  <Constant text="2" />
                </BinaryOp>
              </BinaryOp>
            </SetVariable>
            <SetVariable id="173" style="set-variable">
              <Variable list="false" local="false" variableName="r" />
              <Planet op="radius" style="planet">
                <Constant text="Droo" />
              </Planet>
            </SetVariable>
            <SetVariable id="174" style="set-variable">
              <Variable list="false" local="false" variableName="ra" />
              <BinaryOp op="+" style="op-add">
                <Variable list="false" local="false" variableName="r" />
                <CraftProperty property="Orbit.Apoapsis" style="prop-orbit" />
              </BinaryOp>
            </SetVariable>
            <If id="175" style="if">
              <Comparison op="l" style="op-lt">
                <Variable list="false" local="false" variableName="ra" />
                <BinaryOp op="+" style="op-add">
                  <Variable list="false" local="false" variableName="r" />
                  <Constant text="1" />
                </BinaryOp>
              </Comparison>
              <Instructions>
                <SetVariable id="176" style="set-variable">
                  <Variable list="false" local="false" variableName="ra" />
                  <BinaryOp op="+" style="op-add">
                    <Variable list="false" local="false" variableName="r" />
                    <Constant text="1" />
                  </BinaryOp>
                </SetVariable>
              </Instructions>
            </If>
            <SetVariable id="177" style="set-variable">
              <Variable list="false" local="false" variableName="vcirc" />
              <MathFunction function="sqrt" style="op-math">
                <BinaryOp op="/" style="op-div">
                  <Variable list="false" local="false" variableName="mu" />
                  <Variable list="false" local="false" variableName="ra" />
                </BinaryOp>
              </MathFunction>
            </SetVariable>
            <SetVariable id="178" style="set-variable">
              <Variable list="false" local="false" variableName="vnow" />
              <VectorOp op="length" style="vec-op-1">
                <CraftProperty property="Vel.OrbitVelocity" style="prop-velocity" />
              </VectorOp>
            </SetVariable>
            <SetVariable id="179" style="set-variable">
              <Variable list="false" local="false" variableName="dv" />
              <BinaryOp op="-" style="op-sub">
                <Variable list="false" local="false" variableName="vcirc" />
                <Variable list="false" local="false" variableName="vnow" />
              </BinaryOp>
            </SetVariable>
            <If id="180" style="if">
              <Comparison op="l" style="op-lt">
                <Variable list="false" local="false" variableName="dv" />
                <Constant text="0" />
              </Comparison>
              <Instructions>
                <SetVariable id="181" style="set-variable">
                  <Variable list="false" local="false" variableName="dv" />
                  <Constant text="0" />
                </SetVariable>
              </Instructions>
            </If>
            <If id="182" style="if">
              <Comparison op="le" style="op-lte">
                <Variable list="false" local="false" variableName="dv" />
                <Variable list="false" local="false" variableName="circ_toldv" />
              </Comparison>
              <Instructions>
                <SetInput input="throttle" id="183" style="set-input">
                  <Constant number="0" />
                </SetInput>
                <WaitSeconds id="184" style="wait-seconds">
                  <Constant text="0" />
                </WaitSeconds>
              </Instructions>
            </If>
            <SetVariable id="185" style="set-variable">
              <Variable list="false" local="false" variableName="thr" />
              <BinaryOp op="/" style="op-div">
                <Variable list="false" local="false" variableName="dv" />
                <Constant text="50" />
              </BinaryOp>
            </SetVariable>
            <If id="186" style="if">
              <Comparison op="g" style="op-gt">
                <Variable list="false" local="false" variableName="thr" />
                <Constant text="1" />
              </Comparison>
              <Instructions>
                <SetVariable id="187" style="set-variable">
                  <Variable list="false" local="false" variableName="thr" />
                  <Constant text="1" />
                </SetVariable>
              </Instructions>
            </If>
            <If id="188" style="if">
              <Comparison op="l" style="op-lt">
                <Variable list="false" local="false" variableName="thr" />
                <Constant text=".1" />
              </Comparison>
              <Instructions>
                <SetVariable id="189" style="set-variable">
                  <Variable list="false" local="false" variableName="thr" />
                  <Constant text=".1" />
                </SetVariable>
              </Instructions>
            </If>
            <SetInput input="throttle" id="190" style="set-input">
              <Variable list="false" local="false" variableName="thr" />
            </SetInput>
            <WaitSeconds id="191" style="wait-seconds">
              <Constant text="0" />
            </WaitSeconds>
          </Instructions>
        </If>
        <WaitSeconds id="192" style="wait-seconds">
          <Constant text="0" />
        </WaitSeconds>
      </Instructions>
    </While>
  </Instructions>
  <Instructions>
    <Event event="FlightStart" id="193" style="flight-start" pos="5576.908,1049.918" />
    <Comment id="194" style="comment">
      <Constant style="comment-text" canReplace="false" text="Circularize (burn guidance frame-synced; inactive gates 0.05s)" />
    </Comment>
    <WaitUntil id="195" style="wait-until">
      <Comparison op="=" style="op-eq">
        <Variable list="false" local="false" variableName="fc_mode" />
        <Variable list="false" local="false" variableName="fc_mode_circularization" />
      </Comparison>
    </WaitUntil>
    <SetVariable id="196" style="set-variable">
      <Variable list="false" local="false" variableName="circ_tolalt" />
      <Constant text="500" />
    </SetVariable>
    <SetVariable id="197" style="set-variable">
      <Variable list="false" local="false" variableName="circ_toldv" />
      <Constant text=".5" />
    </SetVariable>
    <SetVariable id="198" style="set-variable">
      <Variable list="false" local="false" variableName="circ_minthrust" />
      <Constant text="1" />
    </SetVariable>
    <SetVariable id="199" style="set-variable">
      <Variable list="false" local="false" variableName="circ_mintime" />
      <Constant text=".1" />
    </SetVariable>
    <SetVariable id="200" style="set-variable">
      <Variable list="false" local="false" variableName="circlocked" />
      <Constant text="0" />
    </SetVariable>
    <While id="201" style="while">
      <Constant style="true" bool="true" />
      <Instructions>
        <If id="202" style="if">
          <Comparison op="=" style="op-eq">
            <Variable list="false" local="false" variableName="circ_active" />
            <Constant number="0" />
          </Comparison>
          <Instructions>
            <If id="203" style="if">
              <Comparison op="=" style="op-eq">
                <Variable list="false" local="false" variableName="circlocked" />
                <Constant text="1" />
              </Comparison>
              <Instructions>
                <LockNavSphere indicatorType="None" id="204" style="lock-nav-sphere" />
                <SetVariable id="205" style="set-variable">
                  <Variable list="false" local="false" variableName="circlocked" />
                  <Constant text="0" />
                </SetVariable>
              </Instructions>
            </If>
            <WaitSeconds id="206" style="wait-seconds">
              <Constant text="0.05" />
            </WaitSeconds>
          </Instructions>
        </If>
        <If id="207" style="if">
          <Not style="op-not">
            <Comparison op="=" style="op-eq">
              <Variable list="false" local="false" variableName="attowner" />
              <Variable list="false" local="false" variableName="attowner_circularization" />
            </Comparison>
          </Not>
          <Instructions>
            <If id="208" style="if">
              <Comparison op="=" style="op-eq">
                <Variable list="false" local="false" variableName="circlocked" />
                <Constant text="1" />
              </Comparison>
              <Instructions>
                <LockNavSphere indicatorType="None" id="209" style="lock-nav-sphere" />
                <SetVariable id="210" style="set-variable">
                  <Variable list="false" local="false" variableName="circlocked" />
                  <Constant text="0" />
                </SetVariable>
              </Instructions>
            </If>
            <WaitSeconds id="211" style="wait-seconds">
              <Constant text="0.05" />
            </WaitSeconds>
          </Instructions>
        </If>
        <If id="212" style="if">
          <Comparison op="=" style="op-eq">
            <ActivationGroup style="activation-group">
              <Constant number="1" />
            </ActivationGroup>
            <Constant style="true" bool="true" />
          </Comparison>
          <Instructions>
            <If id="213" style="if">
              <Comparison op="=" style="op-eq">
                <Variable list="false" local="false" variableName="circlocked" />
                <Constant text="1" />
              </Comparison>
              <Instructions>
                <LockNavSphere indicatorType="None" id="214" style="lock-nav-sphere" />
                <SetVariable id="215" style="set-variable">
                  <Variable list="false" local="false" variableName="circlocked" />
                  <Constant text="0" />
                </SetVariable>
              </Instructions>
            </If>
            <SetVariable id="216" style="set-variable">
              <Variable list="false" local="false" variableName="thrcut" />
              <Constant text="0" />
            </SetVariable>
            <WaitSeconds id="217" style="wait-seconds">
              <Constant text="0.05" />
            </WaitSeconds>
          </Instructions>
        </If>
        <SetVariable id="218" style="set-variable">
          <Variable list="false" local="false" variableName="rvec" />
          <CraftProperty property="Nav.Position" style="prop-nav" />
        </SetVariable>
        <SetVariable id="219" style="set-variable">
          <Variable list="false" local="false" variableName="gvec" />
          <CraftProperty property="Vel.Gravity" style="prop-velocity" />
        </SetVariable>
        <SetVariable id="220" style="set-variable">
          <Variable list="false" local="false" variableName="rmag" />
          <VectorOp op="length" style="vec-op-1">
            <Variable list="false" local="false" variableName="rvec" />
          </VectorOp>
        </SetVariable>
        <SetVariable id="221" style="set-variable">
          <Variable list="false" local="false" variableName="gmag" />
          <VectorOp op="length" style="vec-op-1">
            <Variable list="false" local="false" variableName="gvec" />
          </VectorOp>
        </SetVariable>
        <SetVariable id="222" style="set-variable">
          <Variable list="false" local="false" variableName="mu" />
          <BinaryOp op="*" style="op-mul">
            <Variable list="false" local="false" variableName="gmag" />
            <BinaryOp op="^" style="op-exp">
              <Variable list="false" local="false" variableName="rmag" />
              <Constant text="2" />
            </BinaryOp>
          </BinaryOp>
        </SetVariable>
        <SetVariable id="223" style="set-variable">
          <Variable list="false" local="false" variableName="r" />
          <Planet op="radius" style="planet">
            <Constant text="Droo" />
          </Planet>
        </SetVariable>
        <SetVariable id="224" style="set-variable">
          <Variable list="false" local="false" variableName="ra" />
          <BinaryOp op="+" style="op-add">
            <Variable list="false" local="false" variableName="r" />
            <CraftProperty property="Orbit.Apoapsis" style="prop-orbit" />
          </BinaryOp>
        </SetVariable>
        <If id="225" style="if">
          <Comparison op="l" style="op-lt">
            <Variable list="false" local="false" variableName="ra" />
            <BinaryOp op="+" style="op-add">
              <Variable list="false" local="false" variableName="r" />
              <Constant text="1" />
            </BinaryOp>
          </Comparison>
          <Instructions>
            <SetVariable id="226" style="set-variable">
              <Variable list="false" local="false" variableName="ra" />
              <BinaryOp op="+" style="op-add">
                <Variable list="false" local="false" variableName="r" />
                <Constant text="1" />
              </BinaryOp>
            </SetVariable>
          </Instructions>
        </If>
        <SetVariable id="227" style="set-variable">
          <Variable list="false" local="false" variableName="vcirc" />
          <MathFunction function="sqrt" style="op-math">
            <BinaryOp op="/" style="op-div">
              <Variable list="false" local="false" variableName="mu" />
              <Variable list="false" local="false" variableName="ra" />
            </BinaryOp>
          </MathFunction>
        </SetVariable>
        <SetVariable id="228" style="set-variable">
          <Variable list="false" local="false" variableName="vnow" />
          <VectorOp op="length" style="vec-op-1">
            <CraftProperty property="Vel.OrbitVelocity" style="prop-velocity" />
          </VectorOp>
        </SetVariable>
        <SetVariable id="229" style="set-variable">
          <Variable list="false" local="false" variableName="dv" />
          <BinaryOp op="-" style="op-sub">
            <Variable list="false" local="false" variableName="vcirc" />
            <Variable list="false" local="false" variableName="vnow" />
          </BinaryOp>
        </SetVariable>
        <If id="230" style="if">
          <Comparison op="l" style="op-lt">
            <Variable list="false" local="false" variableName="dv" />
            <Constant text="0" />
          </Comparison>
          <Instructions>
            <SetVariable id="231" style="set-variable">
              <Variable list="false" local="false" variableName="dv" />
              <Constant text="0" />
            </SetVariable>
          </Instructions>
        </If>
        <SetVariable id="232" style="set-variable">
          <Variable list="false" local="false" variableName="m" />
          <CraftProperty property="Performance.Mass" style="prop-performance" />
        </SetVariable>
        <SetVariable id="233" style="set-variable">
          <Variable list="false" local="false" variableName="maxt" />
          <CraftProperty property="Performance.MaxActiveEngineThrust" style="prop-performance" />
        </SetVariable>
        <If id="234" style="if">
          <Comparison op="l" style="op-lt">
            <Variable list="false" local="false" variableName="maxt" />
            <Variable list="false" local="false" variableName="circ_minthrust" />
          </Comparison>
          <Instructions>
            <SetVariable id="235" style="set-variable">
              <Variable list="false" local="false" variableName="thrcut" />
              <Constant text="1" />
            </SetVariable>
            <If id="236" style="if">
              <Comparison op="=" style="op-eq">
                <Variable list="false" local="false" variableName="circlocked" />
                <Constant text="1" />
              </Comparison>
              <Instructions>
                <LockNavSphere indicatorType="None" id="237" style="lock-nav-sphere" />
                <SetVariable id="238" style="set-variable">
                  <Variable list="false" local="false" variableName="circlocked" />
                  <Constant text="0" />
                </SetVariable>
                <WaitSeconds id="239" style="wait-seconds">
                  <Constant text="0.05" />
                </WaitSeconds>
              </Instructions>
            </If>
            <SetVariable id="240" style="set-variable">
              <Variable list="false" local="false" variableName="circ_active" />
              <Constant text="0" />
            </SetVariable>
            <WaitSeconds id="241" style="wait-seconds">
              <Constant text="0.05" />
            </WaitSeconds>
          </Instructions>
        </If>
        <SetVariable id="242" style="set-variable">
          <Variable list="false" local="false" variableName="tburn" />
          <BinaryOp op="/" style="op-div">
            <BinaryOp op="*" style="op-mul">
              <Variable list="false" local="false" variableName="dv" />
              <Variable list="false" local="false" variableName="m" />
            </BinaryOp>
            <Variable list="false" local="false" variableName="maxt" />
          </BinaryOp>
        </SetVariable>
        <If id="243" style="if">
          <Comparison op="l" style="op-lt">
            <Variable list="false" local="false" variableName="tburn" />
            <Variable list="false" local="false" variableName="circ_mintime" />
          </Comparison>
          <Instructions>
            <SetVariable id="244" style="set-variable">
              <Variable list="false" local="false" variableName="tburn" />
              <Variable list="false" local="false" variableName="circ_mintime" />
            </SetVariable>
          </Instructions>
        </If>
        <SetVariable id="245" style="set-variable">
          <Variable list="false" local="false" variableName="burnstart" />
          <BinaryOp op="/" style="op-div">
            <Variable list="false" local="false" variableName="tburn" />
            <Constant text="2" />
          </BinaryOp>
        </SetVariable>
        <If id="246" style="if">
          <Comparison op="=" style="op-eq">
            <Variable list="false" local="false" variableName="circlocked" />
            <Constant number="0" />
          </Comparison>
          <Instructions>
            <LockNavSphere indicatorType="Prograde" id="247" style="lock-nav-sphere" />
            <SetVariable id="248" style="set-variable">
              <Variable list="false" local="false" variableName="circlocked" />
              <Constant text="1" />
            </SetVariable>
          </Instructions>
        </If>
        <While id="249" style="while">
          <Constant style="true" bool="true" />
          <Instructions>
            <If id="250" style="if">
              <Comparison op="=" style="op-eq">
                <ActivationGroup style="activation-group">
                  <Constant number="1" />
                </ActivationGroup>
                <Constant style="true" bool="true" />
              </Comparison>
              <Instructions>
                <SetVariable id="251" style="set-variable">
                  <Variable list="false" local="false" variableName="thrcut" />
                  <Constant text="1" />
                </SetVariable>
                <Break id="252" style="break" />
              </Instructions>
            </If>
            <If id="253" style="if">
              <Comparison op="=" style="op-eq">
                <Not style="op-not">
                  <Comparison op="=" style="op-eq">
                    <Variable list="false" local="false" variableName="attowner" />
                    <Variable list="false" local="false" variableName="attowner_circularization" />
                  </Comparison>
                </Not>
                <Constant style="true" bool="true" />
              </Comparison>
              <Instructions>
                <SetVariable id="254" style="set-variable">
                  <Variable list="false" local="false" variableName="thrcut" />
                  <Constant text="1" />
                </SetVariable>
                <Break id="255" style="break" />
              </Instructions>
            </If>
            <SetVariable id="256" style="set-variable">
              <Variable list="false" local="false" variableName="rvec" />
              <CraftProperty property="Nav.Position" style="prop-nav" />
            </SetVariable>
            <SetVariable id="257" style="set-variable">
              <Variable list="false" local="false" variableName="gvec" />
              <CraftProperty property="Vel.Gravity" style="prop-velocity" />
            </SetVariable>
            <SetVariable id="258" style="set-variable">
              <Variable list="false" local="false" variableName="rmag" />
              <VectorOp op="length" style="vec-op-1">
                <Variable list="false" local="false" variableName="rvec" />
              </VectorOp>
            </SetVariable>
            <SetVariable id="259" style="set-variable">
              <Variable list="false" local="false" variableName="rmag" />
              <VectorOp op="length" style="vec-op-1">
                <Variable list="false" local="false" variableName="gvec" />
              </VectorOp>
            </SetVariable>
            <SetVariable id="260" style="set-variable">
              <Variable list="false" local="false" variableName="mu" />
              <BinaryOp op="*" style="op-mul">
                <Variable list="false" local="false" variableName="gmag" />
                <BinaryOp op="^" style="op-exp">
                  <Variable list="false" local="false" variableName="rmag" />
                  <Constant text="2" />
                </BinaryOp>
              </BinaryOp>
            </SetVariable>
            <SetVariable id="261" style="set-variable">
              <Variable list="false" local="false" variableName="r" />
              <Planet op="radius" style="planet">
                <Constant text="Droo" />
              </Planet>
            </SetVariable>
            <SetVariable id="262" style="set-variable">
              <Variable list="false" local="false" variableName="ra" />
              <BinaryOp op="+" style="op-add">
                <Variable list="false" local="false" variableName="r" />
                <CraftProperty property="Orbit.Apoapsis" style="prop-orbit" />
              </BinaryOp>
            </SetVariable>
            <If id="263" style="if">
              <Comparison op="l" style="op-lt">
                <Variable list="false" local="false" variableName="ra" />
                <BinaryOp op="+" style="op-add">
                  <Variable list="false" local="false" variableName="r" />
                  <Constant text="1" />
                </BinaryOp>
              </Comparison>
              <Instructions>
                <SetVariable id="264" style="set-variable">
                  <Variable list="false" local="false" variableName="ra" />
                  <BinaryOp op="+" style="op-add">
                    <Variable list="false" local="false" variableName="r" />
                    <Constant text="1" />
                  </BinaryOp>
                </SetVariable>
              </Instructions>
            </If>
            <SetVariable id="265" style="set-variable">
              <Variable list="false" local="false" variableName="vcirc" />
              <MathFunction function="sqrt" style="op-math">
                <BinaryOp op="/" style="op-div">
                  <Variable list="false" local="false" variableName="mu" />
                  <Variable list="false" local="false" variableName="ra" />
                </BinaryOp>
              </MathFunction>
            </SetVariable>
            <SetVariable id="266" style="set-variable">
              <Variable list="false" local="false" variableName="vnow" />
              <VectorOp op="length" style="vec-op-1">
                <CraftProperty property="Vel.OrbitVelocity" style="prop-velocity" />
              </VectorOp>
            </SetVariable>
            <SetVariable id="267" style="set-variable">
              <Variable list="false" local="false" variableName="dv" />
              <BinaryOp op="-" style="op-sub">
                <Variable list="false" local="false" variableName="vcirc" />
                <Variable list="false" local="false" variableName="vnow" />
              </BinaryOp>
            </SetVariable>
            <If id="268" style="if">
              <Comparison op="l" style="op-lt">
                <Variable list="false" local="false" variableName="dv" />
                <Constant text="0" />
              </Comparison>
              <Instructions>
                <SetVariable id="269" style="set-variable">
                  <Variable list="false" local="false" variableName="dv" />
                  <Constant text="0" />
                </SetVariable>
              </Instructions>
            </If>
            <If id="270" style="if">
              <BoolOp op="and" style="op-and">
                <Comparison op="ge" style="op-gte">
                  <CraftProperty property="Orbit.Periapsis" style="prop-orbit" />
                  <BinaryOp op="-" style="op-sub">
                    <Variable list="false" local="false" variableName="targetalt_m" />
                    <Variable list="false" local="false" variableName="circ_tolalt" />
                  </BinaryOp>
                </Comparison>
                <Comparison op="le" style="op-lte">
                  <Variable list="false" local="false" variableName="dv" />
                  <Variable list="false" local="false" variableName="circ_toldv" />
                </Comparison>
              </BoolOp>
              <Instructions>
                <SetVariable id="271" style="set-variable">
                  <Variable list="false" local="false" variableName="thrcut" />
                  <Constant text="0" />
                </SetVariable>
                <LockNavSphere indicatorType="None" id="272" style="lock-nav-sphere" />
                <SetVariable id="273" style="set-variable">
                  <Variable list="false" local="false" variableName="circlocked" />
                  <Constant text="0" />
                </SetVariable>
                <SetVariable id="274" style="set-variable">
                  <Variable list="false" local="false" variableName="circ_active" />
                  <Constant text="0" />
                </SetVariable>
                <SetVariable id="275" style="set-variable">
                  <Variable list="false" local="false" variableName="fc_mode" />
                  <Variable list="false" local="false" variableName="fc_mode_done" />
                </SetVariable>
                <Break id="276" style="break" />
              </Instructions>
            </If>
            <WaitSeconds id="277" style="wait-seconds">
              <Constant text="0" />
            </WaitSeconds>
          </Instructions>
        </While>
        <WaitSeconds id="278" style="wait-seconds">
          <Constant text="0.05" />
        </WaitSeconds>
      </Instructions>
    </While>
  </Instructions>
  <Instructions>
    <Event event="FlightStart" id="279" style="flight-start" pos="3039.282,1668.505" />
    <Comment id="280" style="comment">
      <Constant style="comment-text" canReplace="false" text="PEG Guidance (active guidance loop frame-synced; standby gate 0.05s)" />
    </Comment>
    <SetVariable id="281" style="set-variable">
      <Variable list="false" local="false" variableName="escale" />
      <Constant text="2000000" />
    </SetVariable>
    <SetVariable id="282" style="set-variable">
      <Variable list="false" local="false" variableName="k_e_max" />
      <Constant text=".6" />
    </SetVariable>
    <SetVariable id="283" style="set-variable">
      <Variable list="false" local="false" variableName="k_i_max" />
      <Constant text=".3" />
    </SetVariable>
    <SetVariable id="284" style="set-variable">
      <Variable list="false" local="false" variableName="peg_pitchcmd" />
      <Constant text="90" />
    </SetVariable>
    <SetVariable id="285" style="set-variable">
      <Variable list="false" local="false" variableName="peg_headingcmd" />
      <Constant text="90" />
    </SetVariable>
    <SetVariable id="286" style="set-variable">
      <Variable list="false" local="false" variableName="targetinc_rad" />
      <MathFunction function="deg2rad" style="op-math">
        <Variable list="false" local="false" variableName="targetinc_deg" />
      </MathFunction>
    </SetVariable>
    <WaitUntil id="287" style="wait-until">
      <Comparison op="=" style="op-eq">
        <Variable list="false" local="false" variableName="attowner" />
        <Variable list="false" local="false" variableName="attowner_guidance" />
      </Comparison>
    </WaitUntil>
    <DisplayMessage id="288" style="display">
      <Constant text="Initializing PEG Guidance" />
      <Constant number="7" />
    </DisplayMessage>
    <LogFlight id="289" style="flightlog">
      <Constant text="Initializing PEG Guidance" />
      <Constant style="false" bool="false" />
    </LogFlight>
    <While id="290" style="while">
      <Constant style="true" bool="true" />
      <Instructions>
        <If id="291" style="if">
          <Not style="op-not">
            <Comparison op="=" style="op-eq">
              <Variable list="false" local="false" variableName="attowner" />
              <Variable list="false" local="false" variableName="attowner_guidance" />
            </Comparison>
          </Not>
          <Instructions>
            <WaitSeconds id="292" style="wait-seconds">
              <Constant text="0.05" />
            </WaitSeconds>
          </Instructions>
        </If>
        <SetVariable id="293" style="set-variable">
          <Variable list="false" local="false" variableName="peg_htarget_ready" />
          <Constant number="0" />
        </SetVariable>
        <While id="294" style="while">
          <Comparison op="=" style="op-eq">
            <Variable list="false" local="false" variableName="attowner" />
            <Variable list="false" local="false" variableName="attowner_guidance" />
          </Comparison>
          <Instructions>
            <SetVariable id="295" style="set-variable">
              <Variable list="false" local="false" variableName="rvec" />
              <CraftProperty property="Nav.Position" style="prop-nav" />
            </SetVariable>
            <SetVariable id="296" style="set-variable">
              <Variable list="false" local="false" variableName="vvec" />
              <CraftProperty property="Vel.OrbitVelocity" style="prop-velocity" />
            </SetVariable>
            <SetVariable id="297" style="set-variable">
              <Variable list="false" local="false" variableName="rhat" />
              <VectorOp op="norm" style="vec-op-1">
                <Variable list="false" local="false" variableName="rvec" />
              </VectorOp>
            </SetVariable>
            <SetVariable id="298" style="set-variable">
              <Variable list="false" local="false" variableName="nhat" />
              <VectorOp op="norm" style="vec-op-1">
                <CraftProperty property="Nav.North" style="prop-nav" />
              </VectorOp>
            </SetVariable>
            <SetVariable id="299" style="set-variable">
              <Variable list="false" local="false" variableName="ehat" />
              <VectorOp op="norm" style="vec-op-1">
                <CraftProperty property="Nav.East" style="prop-nav" />
              </VectorOp>
            </SetVariable>
            <SetVariable id="300" style="set-variable">
              <Variable list="false" local="false" variableName="ki" />
              <Constant text="0" />
            </SetVariable>
            <If id="301" style="if">
              <Comparison op="=" style="op-eq">
                <Variable list="false" local="false" variableName="peg_readyk" />
                <Constant text="1" />
              </Comparison>
              <Instructions>
                <If id="302" style="if">
                  <Comparison op="=" style="op-eq">
                    <Variable list="false" local="false" variableName="peg_htarget_ready" />
                    <Constant text="0" />
                  </Comparison>
                  <Instructions>
                    <SetVariable id="303" style="set-variable">
                      <Variable list="false" local="false" variableName="peg_r0" />
                      <VectorOp op="norm" style="vec-op-1">
                        <CraftProperty property="Nav.Position" style="prop-nav" />
                      </VectorOp>
                    </SetVariable>
                    <SetVariable id="304" style="set-variable">
                      <Variable list="false" local="false" variableName="peg_nodeaxis" />
                      <VectorOp op="norm" style="vec-op-1">
                        <VectorOp op="cross" style="vec-op-2">
                          <Variable list="false" local="false" variableName="peg_k" />
                          <Variable list="false" local="false" variableName="peg_r0" />
                        </VectorOp>
                      </VectorOp>
                    </SetVariable>
                    <SetVariable id="305" style="set-variable">
                      <Variable list="false" local="false" variableName="targetinc_rad" />
                      <MathFunction function="deg2rad" style="op-math">
                        <Variable list="false" local="false" variableName="targetinc_deg" />
                      </MathFunction>
                    </SetVariable>
                    <SetVariable id="306" style="set-variable">
                      <Variable list="false" local="false" variableName="cosi" />
                      <MathFunction function="cos" style="op-math">
                        <Variable list="false" local="false" variableName="targetinc_rad" />
                      </MathFunction>
                    </SetVariable>
                    <SetVariable id="307" style="set-variable">
                      <Variable list="false" local="false" variableName="sini" />
                      <MathFunction function="sin" style="op-math">
                        <Variable list="false" local="false" variableName="targetinc_rad" />
                      </MathFunction>
                    </SetVariable>
                    <SetVariable id="308" style="set-variable">
                      <Variable list="false" local="false" variableName="term1" />
                      <BinaryOp op="*" style="op-mul">
                        <Variable list="false" local="false" variableName="peg_k" />
                        <Variable list="false" local="false" variableName="cosi" />
                      </BinaryOp>
                    </SetVariable>
                    <SetVariable id="309" style="set-variable">
                      <Variable list="false" local="false" variableName="term2" />
                      <BinaryOp op="*" style="op-mul">
                        <VectorOp op="cross" style="vec-op-2">
                          <Variable list="false" local="false" variableName="peg_nodeaxis" />
                          <Variable list="false" local="false" variableName="peg_k" />
                        </VectorOp>
                        <Variable list="false" local="false" variableName="sini" />
                      </BinaryOp>
                    </SetVariable>
                    <SetVariable id="310" style="set-variable">
                      <Variable list="false" local="false" variableName="term3" />
                      <BinaryOp op="*" style="op-mul">
                        <Variable list="false" local="false" variableName="peg_nodeaxis" />
                        <BinaryOp op="*" style="op-mul">
                          <VectorOp op="dot" style="vec-op-2">
                            <Variable list="false" local="false" variableName="peg_nodeaxis" />
                            <Variable list="false" local="false" variableName="peg_k" />
                          </VectorOp>
                          <BinaryOp op="-" style="op-sub">
                            <Constant text="1" />
                            <Variable list="false" local="false" variableName="cosi" />
                          </BinaryOp>
                        </BinaryOp>
                      </BinaryOp>
                    </SetVariable>
                    <SetVariable id="311" style="set-variable">
                      <Variable list="false" local="false" variableName="peg_htarget" />
                      <VectorOp op="norm" style="vec-op-1">
                        <BinaryOp op="+" style="op-add">
                          <Variable list="false" local="false" variableName="term1" />
                          <BinaryOp op="+" style="op-add">
                            <Variable list="false" local="false" variableName="term2" />
                            <Variable list="false" local="false" variableName="term3" />
                          </BinaryOp>
                        </BinaryOp>
                      </VectorOp>
                    </SetVariable>
                  </Instructions>
                </If>
                <If id="312" style="if">
                  <Comparison op="ge" style="op-gte">
                    <CraftProperty property="Altitude.AGL" style="prop-altitude" />
                    <Constant text="10000" />
                  </Comparison>
                  <Instructions>
                    <SetVariable id="313" style="set-variable">
                      <Variable list="false" local="false" variableName="hvec" />
                      <VectorOp op="cross" style="vec-op-2">
                        <Constant vector="(0, 0, 0)" />
                        <Constant vector="(0, 0, 0)" />
                      </VectorOp>
                    </SetVariable>
                    <SetVariable id="314" style="set-variable">
                      <Variable list="false" local="false" variableName="hhat" />
                      <VectorOp op="norm" style="vec-op-1">
                        <Variable list="false" local="false" variableName="hvec" />
                      </VectorOp>
                    </SetVariable>
                    <SetVariable id="315" style="set-variable">
                      <Variable list="false" local="false" variableName="planeerroraxis" />
                      <Constant text="" />
                    </SetVariable>
                    <SetVariable id="316" style="set-variable">
                      <Variable list="false" local="false" variableName="planeerrormag" />
                      <VectorOp op="length" style="vec-op-1">
                        <Variable list="false" local="false" variableName="planeerroraxis" />
                      </VectorOp>
                    </SetVariable>
                    <SetVariable id="317" style="set-variable">
                      <Variable list="false" local="false" variableName="ki" />
                      <BinaryOp op="/" style="op-div">
                        <Variable list="false" local="false" variableName="planeerrormag" />
                        <Constant text="5" />
                      </BinaryOp>
                    </SetVariable>
                    <If id="318" style="if">
                      <Comparison op="g" style="op-gt">
                        <Variable list="false" local="false" variableName="ki" />
                        <Variable list="false" local="false" variableName="k_i_max" />
                      </Comparison>
                      <Instructions>
                        <SetVariable id="319" style="set-variable">
                          <Variable list="false" local="false" variableName="ki" />
                          <Variable list="false" local="false" variableName="k_i_max" />
                        </SetVariable>
                      </Instructions>
                    </If>
                  </Instructions>
                </If>
              </Instructions>
            </If>
            <SetVariable id="320" style="set-variable">
              <Variable list="false" local="false" variableName="gvec" />
              <CraftProperty property="Vel.Gravity" style="prop-velocity" />
            </SetVariable>
            <SetVariable id="321" style="set-variable">
              <Variable list="false" local="false" variableName="rmag" />
              <VectorOp op="length" style="vec-op-1">
                <Variable list="false" local="false" variableName="rvec" />
              </VectorOp>
            </SetVariable>
            <SetVariable id="322" style="set-variable">
              <Variable list="false" local="false" variableName="gmag" />
              <VectorOp op="length" style="vec-op-1">
                <Variable list="false" local="false" variableName="gvec" />
              </VectorOp>
            </SetVariable>
            <SetVariable id="323" style="set-variable">
              <Variable list="false" local="false" variableName="mu" />
              <BinaryOp op="*" style="op-mul">
                <Variable list="false" local="false" variableName="gmag" />
                <BinaryOp op="^" style="op-exp">
                  <Variable list="false" local="false" variableName="rmag" />
                  <Constant text="2" />
                </BinaryOp>
              </BinaryOp>
            </SetVariable>
            <SetVariable id="324" style="set-variable">
              <Variable list="false" local="false" variableName="r" />
              <Planet op="radius" style="planet">
                <Constant text="Droo" />
              </Planet>
            </SetVariable>
            <SetVariable id="325" style="set-variable">
              <Variable list="false" local="false" variableName="rt" />
              <BinaryOp op="+" style="op-add">
                <Variable list="false" local="false" variableName="r" />
                <Variable list="false" local="false" variableName="targetalt_m" />
              </BinaryOp>
            </SetVariable>
            <SetVariable id="326" style="set-variable">
              <Variable list="false" local="false" variableName="vcirc" />
              <MathFunction function="sqrt" style="op-math">
                <BinaryOp op="/" style="op-div">
                  <Variable list="false" local="false" variableName="mu" />
                  <Variable list="false" local="false" variableName="rt" />
                </BinaryOp>
              </MathFunction>
            </SetVariable>
            <SetVariable id="327" style="set-variable">
              <Variable list="false" local="false" variableName="et" />
              <BinaryOp op="/" style="op-div">
                <BinaryOp op="*" style="op-mul">
                  <Constant text="-1" />
                  <Variable list="false" local="false" variableName="mu" />
                </BinaryOp>
                <BinaryOp op="*" style="op-mul">
                  <Constant text="2" />
                  <Variable list="false" local="false" variableName="rt" />
                </BinaryOp>
              </BinaryOp>
            </SetVariable>
            <SetVariable id="328" style="set-variable">
              <Variable list="false" local="false" variableName="vmag" />
              <VectorOp op="length" style="vec-op-1">
                <Variable list="false" local="false" variableName="vvec" />
              </VectorOp>
            </SetVariable>
            <SetVariable id="329" style="set-variable">
              <Variable list="false" local="false" variableName="e" />
              <BinaryOp op="-" style="op-sub">
                <BinaryOp op="/" style="op-div">
                  <BinaryOp op="^" style="op-exp">
                    <Variable list="false" local="false" variableName="vmag" />
                    <Constant text="2" />
                  </BinaryOp>
                  <Constant text="2" />
                </BinaryOp>
                <BinaryOp op="/" style="op-div">
                  <Variable list="false" local="false" variableName="mu" />
                  <Variable list="false" local="false" variableName="rmag" />
                </BinaryOp>
              </BinaryOp>
            </SetVariable>
            <SetVariable id="330" style="set-variable">
              <Variable list="false" local="false" variableName="ee" />
              <BinaryOp op="-" style="op-sub">
                <Variable list="false" local="false" variableName="et" />
                <Variable list="false" local="false" variableName="e" />
              </BinaryOp>
            </SetVariable>
            <SetVariable id="331" style="set-variable">
              <Variable list="false" local="false" variableName="ke" />
              <BinaryOp op="/" style="op-div">
                <Variable list="false" local="false" variableName="ee" />
                <Variable list="false" local="false" variableName="escale" />
              </BinaryOp>
            </SetVariable>
            <If id="332" style="if">
              <Comparison op="g" style="op-gt">
                <Constant text="0" />
                <Variable list="false" local="false" variableName="ke" />
              </Comparison>
              <Instructions>
                <SetVariable id="333" style="set-variable">
                  <Variable list="false" local="false" variableName="ke" />
                  <Constant text="0" />
                </SetVariable>
              </Instructions>
            </If>
            <If id="334" style="if">
              <Comparison op="g" style="op-gt">
                <Variable list="false" local="false" variableName="ke" />
                <Variable list="false" local="false" variableName="k_e_max" />
              </Comparison>
              <Instructions>
                <SetVariable id="335" style="set-variable">
                  <Variable list="false" local="false" variableName="ke" />
                  <Variable list="false" local="false" variableName="k_e_max" />
                </SetVariable>
              </Instructions>
            </If>
            <If id="336" style="if">
              <Comparison op="=" style="op-eq">
                <Variable list="false" local="false" variableName="peg_readyk" />
                <Constant text="1" />
              </Comparison>
              <Instructions>
                <SetVariable id="337" style="set-variable">
                  <Variable list="false" local="false" variableName="traw" />
                  <VectorOp op="cross" style="vec-op-2">
                    <Variable list="false" local="false" variableName="peg_htarget" />
                    <Variable list="false" local="false" variableName="rhat" />
                  </VectorOp>
                </SetVariable>
                <If id="338" style="if">
                  <Comparison op="l" style="op-lt">
                    <VectorOp op="length" style="vec-op-1">
                      <Variable list="false" local="false" variableName="traw" />
                    </VectorOp>
                    <Constant text=".001" />
                  </Comparison>
                  <Instructions>
                    <SetVariable id="339" style="set-variable">
                      <Variable list="false" local="false" variableName="that" />
                      <Variable list="false" local="false" variableName="ehat" />
                    </SetVariable>
                  </Instructions>
                </If>
                <ElseIf id="340" style="else">
                  <Constant bool="true" />
                  <Instructions>
                    <SetVariable id="341" style="set-variable">
                      <Variable list="false" local="false" variableName="that" />
                      <VectorOp op="norm" style="vec-op-1">
                        <Variable list="false" local="false" variableName="traw" />
                      </VectorOp>
                    </SetVariable>
                  </Instructions>
                </ElseIf>
              </Instructions>
            </If>
            <ElseIf id="342" style="else">
              <Constant bool="true" />
              <Instructions>
                <SetVariable id="343" style="set-variable">
                  <Variable list="false" local="false" variableName="that" />
                  <Variable list="false" local="false" variableName="ehat" />
                </SetVariable>
              </Instructions>
            </ElseIf>
            <If id="344" style="if">
              <Comparison op="l" style="op-lt">
                <VectorOp op="dot" style="vec-op-2">
                  <Variable list="false" local="false" variableName="that" />
                  <Variable list="false" local="false" variableName="vvec" />
                </VectorOp>
                <Constant text="0" />
              </Comparison>
              <Instructions>
                <SetVariable id="345" style="set-variable">
                  <Variable list="false" local="false" variableName="that" />
                  <BinaryOp op="*" style="op-mul">
                    <Constant text="-1" />
                    <Variable list="false" local="false" variableName="that" />
                  </BinaryOp>
                </SetVariable>
              </Instructions>
            </If>
            <If id="346" style="if">
              <Comparison op="g" style="op-gt">
                <Variable list="false" local="false" variableName="ki" />
                <Constant number="0" />
              </Comparison>
              <Instructions>
                <SetVariable id="347" style="set-variable">
                  <Variable list="false" local="false" variableName="hvec2" />
                  <VectorOp op="cross" style="vec-op-2">
                    <Variable list="false" local="false" variableName="rvec" />
                    <Variable list="false" local="false" variableName="vvec" />
                  </VectorOp>
                </SetVariable>
                <SetVariable id="348" style="set-variable">
                  <Variable list="false" local="false" variableName="hhat2" />
                  <VectorOp op="norm" style="vec-op-1">
                    <Variable list="false" local="false" variableName="hvec2" />
                  </VectorOp>
                </SetVariable>
                <SetVariable id="349" style="set-variable">
                  <Variable list="false" local="false" variableName="caxis" />
                  <VectorOp op="cross" style="vec-op-2">
                    <Variable list="false" local="false" variableName="hhat2" />
                    <Variable list="false" local="false" variableName="peg_htarget" />
                  </VectorOp>
                </SetVariable>
              </Instructions>
            </If>
            <If id="350" style="if">
              <Comparison op="g" style="op-gt">
                <VectorOp op="length" style="vec-op-1">
                  <Variable list="false" local="false" variableName="caxis" />
                </VectorOp>
                <Constant text=".0001" />
              </Comparison>
              <Instructions>
                <SetVariable id="351" style="set-variable">
                  <Variable list="false" local="false" variableName="pdir" />
                  <VectorOp op="norm" style="vec-op-1">
                    <VectorOp op="cross" style="vec-op-2">
                      <Variable list="false" local="false" variableName="caxis" />
                      <Variable list="false" local="false" variableName="rhat" />
                    </VectorOp>
                  </VectorOp>
                </SetVariable>
              </Instructions>
            </If>
            <ElseIf id="352" style="else">
              <Constant bool="true" />
              <Instructions>
                <SetVariable id="353" style="set-variable">
                  <Variable list="false" local="false" variableName="pdir" />
                  <Vector style="vec">
                    <Constant number="0" />
                    <Constant number="0" />
                    <Constant number="0" />
                  </Vector>
                </SetVariable>
              </Instructions>
            </ElseIf>
            <SetVariable id="354" style="set-variable">
              <Variable list="false" local="false" variableName="dcmd" />
              <VectorOp op="norm" style="vec-op-1">
                <BinaryOp op="+" style="op-add">
                  <BinaryOp op="+" style="op-add">
                    <Variable list="false" local="false" variableName="that" />
                    <BinaryOp op="*" style="op-mul">
                      <Variable list="false" local="false" variableName="rhat" />
                      <Variable list="false" local="false" variableName="ke" />
                    </BinaryOp>
                  </BinaryOp>
                  <BinaryOp op="*" style="op-mul">
                    <Variable list="false" local="false" variableName="pdir" />
                    <Variable list="false" local="false" variableName="ki" />
                  </BinaryOp>
                </BinaryOp>
              </VectorOp>
            </SetVariable>
            <SetVariable id="355" style="set-variable">
              <Variable list="false" local="false" variableName="ucomp" />
              <VectorOp op="dot" style="vec-op-2">
                <Variable list="false" local="false" variableName="dcmd" />
                <Variable list="false" local="false" variableName="rhat" />
              </VectorOp>
            </SetVariable>
            <SetVariable id="356" style="set-variable">
              <Variable list="false" local="false" variableName="ncomp" />
              <VectorOp op="dot" style="vec-op-2">
                <Variable list="false" local="false" variableName="dcmd" />
                <Variable list="false" local="false" variableName="nhat" />
              </VectorOp>
            </SetVariable>
            <SetVariable id="357" style="set-variable">
              <Variable list="false" local="false" variableName="ecomp" />
              <VectorOp op="dot" style="vec-op-2">
                <Variable list="false" local="false" variableName="dcmd" />
                <Variable list="false" local="false" variableName="ehat" />
              </VectorOp>
            </SetVariable>
            <SetVariable id="358" style="set-variable">
              <Variable list="false" local="false" variableName="pitchrad" />
              <MathFunction function="asin" style="op-math">
                <Variable list="false" local="false" variableName="ucomp" />
              </MathFunction>
            </SetVariable>
            <SetVariable id="359" style="set-variable">
              <Variable list="false" local="false" variableName="pitchdeg" />
              <MathFunction function="rad2deg" style="op-math">
                <Variable list="false" local="false" variableName="pitchdeg" />
              </MathFunction>
            </SetVariable>
            <SetVariable id="360" style="set-variable">
              <Variable list="false" local="false" variableName="headingrad" />
              <BinaryOp op="atan2" style="op-atan-2">
                <Variable list="false" local="false" variableName="ecomp" />
                <Variable list="false" local="false" variableName="ncomp" />
              </BinaryOp>
            </SetVariable>
            <SetVariable id="361" style="set-variable">
              <Variable list="false" local="false" variableName="headingdeg" />
              <MathFunction function="rad2deg" style="op-math">
                <Variable list="false" local="false" variableName="headingrad" />
              </MathFunction>
            </SetVariable>
            <If id="362" style="if">
              <Comparison op="l" style="op-lt">
                <Variable list="false" local="false" variableName="headingdeg" />
                <Constant text="0" />
              </Comparison>
              <Instructions>
                <SetVariable id="363" style="set-variable">
                  <Variable list="false" local="false" variableName="headingdeg" />
                  <BinaryOp op="+" style="op-add">
                    <Variable list="false" local="false" variableName="headingdeg" />
                    <Constant text="360" />
                  </BinaryOp>
                </SetVariable>
              </Instructions>
            </If>
            <SetVariable id="364" style="set-variable">
              <Variable list="false" local="false" variableName="hdgerror" />
              <BinaryOp op="-" style="op-sub">
                <Variable list="false" local="false" variableName="headingdeg" />
                <Variable list="false" local="false" variableName="peg_headingcmd" />
              </BinaryOp>
            </SetVariable>
            <If id="365" style="if">
              <Comparison op="g" style="op-gt">
                <Variable list="false" local="false" variableName="hdgerror" />
                <Constant text="180" />
              </Comparison>
              <Instructions>
                <SetVariable id="366" style="set-variable">
                  <Variable list="false" local="false" variableName="hdgerror" />
                  <BinaryOp op="-" style="op-sub">
                    <Variable list="false" local="false" variableName="hdgerror" />
                    <Constant text="360" />
                  </BinaryOp>
                </SetVariable>
              </Instructions>
            </If>
            <If id="367" style="if">
              <Comparison op="l" style="op-lt">
                <Variable list="false" local="false" variableName="hdgerror" />
                <Constant text="-180" />
              </Comparison>
              <Instructions>
                <SetVariable id="368" style="set-variable">
                  <Variable list="false" local="false" variableName="hdgerror" />
                  <BinaryOp op="+" style="op-add">
                    <Variable list="false" local="false" variableName="hdgerror" />
                    <Constant text="360" />
                  </BinaryOp>
                </SetVariable>
              </Instructions>
            </If>
            <If id="369" style="if">
              <Comparison op="g" style="op-gt">
                <CraftProperty property="Nav.AngleOfAttack" style="prop-nav" />
                <Variable list="false" local="false" variableName="gt_maxaoa" />
              </Comparison>
              <Instructions>
                <SetVariable id="370" style="set-variable">
                  <Variable list="false" local="false" variableName="smoothdiv" />
                  <Constant text="20" />
                </SetVariable>
              </Instructions>
            </If>
            <ElseIf id="371" style="else">
              <Constant bool="true" />
              <Instructions>
                <SetVariable id="372" style="set-variable">
                  <Variable list="false" local="false" variableName="smoothdiv" />
                  <Constant text="10" />
                </SetVariable>
              </Instructions>
            </ElseIf>
            <SetVariable id="373" style="set-variable">
              <Variable list="false" local="false" variableName="peg_pitchcmd" />
              <BinaryOp op="/" style="op-div">
                <BinaryOp op="+" style="op-add">
                  <Variable list="false" local="false" variableName="peg_pitchcmd" />
                  <BinaryOp op="-" style="op-sub">
                    <Variable list="false" local="false" variableName="pitchdeg" />
                    <Variable list="false" local="false" variableName="peg_pitchcmd" />
                  </BinaryOp>
                </BinaryOp>
                <Variable list="false" local="false" variableName="smoothdiv" />
              </BinaryOp>
            </SetVariable>
            <SetVariable id="374" style="set-variable">
              <Variable list="false" local="false" variableName="peg_headingcmd" />
              <BinaryOp op="+" style="op-add">
                <Variable list="false" local="false" variableName="peg_headingcmd" />
                <BinaryOp op="/" style="op-div">
                  <Variable list="false" local="false" variableName="hdgerror" />
                  <Variable list="false" local="false" variableName="smoothdiv" />
                </BinaryOp>
              </BinaryOp>
            </SetVariable>
            <If id="375" style="if">
              <Comparison op="l" style="op-lt">
                <Variable list="false" local="false" variableName="peg_headingcmd" />
                <Constant number="0" />
              </Comparison>
              <Instructions>
                <SetVariable id="376" style="set-variable">
                  <Variable list="false" local="false" variableName="peg_headingcmd" />
                  <BinaryOp op="+" style="op-add">
                    <Variable list="false" local="false" variableName="peg_headingcmd" />
                    <Constant text="360" />
                  </BinaryOp>
                </SetVariable>
              </Instructions>
            </If>
            <If id="377" style="if">
              <Comparison op="ge" style="op-gte">
                <Variable list="false" local="false" variableName="peg_headingcmd" />
                <Constant text="360" />
              </Comparison>
              <Instructions>
                <SetVariable id="378" style="set-variable">
                  <Variable list="false" local="false" variableName="peg_headingcmd" />
                  <BinaryOp op="-" style="op-sub">
                    <Variable list="false" local="false" variableName="peg_headingcmd" />
                    <Constant text="360" />
                  </BinaryOp>
                </SetVariable>
              </Instructions>
            </If>
            <SetTargetHeading property="pitch" id="379" style="set-heading">
              <Variable list="false" local="false" variableName="peg_pitchcmd" />
            </SetTargetHeading>
            <SetTargetHeading property="heading" id="380" style="set-heading">
              <Variable list="false" local="false" variableName="peg_headingcmd" />
            </SetTargetHeading>
            <WaitSeconds id="381" style="wait-seconds">
              <Constant text="0" />
            </WaitSeconds>
          </Instructions>
        </While>
      </Instructions>
    </While>
  </Instructions>
  <Instructions>
    <CustomInstruction callFormat="Countdown" format="Countdown" name="Countdown" id="382" style="custom-instruction" pos="4086.381,1256.738" />
    <SetVariable id="383" style="set-variable">
      <Variable list="false" local="false" variableName="gt_tsv" />
      <Constant text="250" />
    </SetVariable>
    <LockNavSphere indicatorType="Current" id="384" style="lock-nav-sphere" />
    <DisplayMessage id="385" style="display">
      <Constant text="Set Throttle&gt;90% to count down." />
      <Constant number="7" />
    </DisplayMessage>
    <WaitUntil id="386" style="wait-until">
      <Comparison op="g" style="op-gt">
        <CraftProperty property="Input.Throttle" style="prop-input" />
        <Constant text=".9" />
      </Comparison>
    </WaitUntil>
    <SetCraftProperty property="Sound.Beep" id="387" style="play-beep">
      <Constant number="1000" />
      <Constant number="1" />
      <Constant text=".5" />
    </SetCraftProperty>
    <DisplayMessage id="388" style="display">
      <Constant text="3" />
      <Constant number="7" />
    </DisplayMessage>
    <WaitSeconds id="389" style="wait-seconds">
      <Constant number="1" />
    </WaitSeconds>
    <SetCraftProperty property="Sound.Beep" id="390" style="play-beep">
      <Constant number="1000" />
      <Constant number="1" />
      <Constant text=".5" />
    </SetCraftProperty>
    <DisplayMessage id="391" style="display">
      <Constant text="2" />
      <Constant number="7" />
    </DisplayMessage>
    <WaitSeconds id="392" style="wait-seconds">
      <Constant number="1" />
    </WaitSeconds>
    <SetCraftProperty property="Sound.Beep" id="393" style="play-beep">
      <Constant number="1000" />
      <Constant number="1" />
      <Constant text=".5" />
    </SetCraftProperty>
    <DisplayMessage id="394" style="display">
      <Constant text="1" />
      <Constant number="7" />
    </DisplayMessage>
    <WaitSeconds id="395" style="wait-seconds">
      <Constant number="1" />
    </WaitSeconds>
    <SetCraftProperty property="Sound.Beep" id="396" style="play-beep">
      <Constant text="1500" />
      <Constant number="1" />
      <Constant text=".5" />
    </SetCraftProperty>
    <DisplayMessage id="397" style="display">
      <Constant text="Blastoff!!!!" />
      <Constant number="7" />
    </DisplayMessage>
    <ActivateStage id="398" style="activate-stage" />
    <WaitUntil id="399" style="wait-until">
      <Comparison op="g" style="op-gt">
        <CraftProperty property="Vel.SurfaceVelocity" style="prop-velocity" />
        <Variable list="false" local="false" variableName="gt_tsv" />
      </Comparison>
    </WaitUntil>
    <SetVariable id="400" style="set-variable">
      <Variable list="false" local="false" variableName="fc_mode" />
      <Variable list="false" local="false" variableName="fc_mode_ascent" />
    </SetVariable>
    <DisplayMessage id="401" style="display">
      <Constant text="Beginning Gravity Turn" />
      <Constant number="7" />
    </DisplayMessage>
    <LogFlight id="402" style="flightlog">
      <Constant text="Beginning Gravity Turn" />
      <Constant style="false" bool="false" />
    </LogFlight>
  </Instructions>
  <Expressions />
</Program>
